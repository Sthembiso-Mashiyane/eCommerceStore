{"remainingRequest":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/babel-loader/lib/index.js!/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/eslint-loader/index.js??ref--13-0!/Users/sthembisomashiyane/WebstormProjects/dripy/src/stores/modules/auth.js","dependencies":[{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/src/stores/modules/auth.js","mtime":1587899242306},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/cache-loader/dist/cjs.js","mtime":1587899238127},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/babel-loader/lib/index.js","mtime":1587899237742},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/eslint-loader/index.js","mtime":1587899238895}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGIsIGZpcmViYXNlQXV0aCB9IGZyb20gIi4uLy4uL2NvbmZpZy9maXJlYmFzZUNvbmZpZyI7CnZhciBzdGF0ZSA9IHsKICBpc0xvZ2dlZEluOiBmaXJlYmFzZUF1dGguY3VycmVudFVzZXIgIT0gbnVsbCwKICB1c2VyOiBmaXJlYmFzZUF1dGguY3VycmVudFVzZXIsCiAgdXNlckxvYWRpbmc6IGZhbHNlCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgJ0FVVEhfU1RBVFVTX0NIQU5HRSc6IGZ1bmN0aW9uIEFVVEhfU1RBVFVTX0NIQU5HRShzdGF0ZSkgewogICAgc3RhdGUuaXNMb2dnZWRJbiA9IGZpcmViYXNlQXV0aC5jdXJyZW50VXNlciAhPSBudWxsOwogICAgc3RhdGUudXNlciA9IGZpcmViYXNlQXV0aC5jdXJyZW50VXNlcjsKICB9LAogICdFRElUX1VTRVJfU1RBVEUnOiBmdW5jdGlvbiBFRElUX1VTRVJfU1RBVEUoc3RhdGUsIHVzZXIpIHsKICAgIHN0YXRlLnVzZXIgPSB1c2VyOwogICAgc3RhdGUudXNlckxvYWRpbmcgPSBmYWxzZTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGdldFVzZXI6IGZ1bmN0aW9uIGdldFVzZXIoX3JlZiwgdWlkKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICBzdGF0ZS51c2VyTG9hZGluZyA9IHRydWU7CiAgICByZXR1cm4gZGIuY29sbGVjdGlvbigidXNlcnMiKS5kb2ModWlkKS5vblNuYXBzaG90KGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgIGlmICh1c2VyLmV4aXN0cykgewogICAgICAgIHZhciB0b1NlbmQgPSB1c2VyLmRhdGEoKTsKICAgICAgICBjb25zb2xlLmxvZyh0b1NlbmQpOwogICAgICAgIGNvbW1pdCgnRURJVF9VU0VSX1NUQVRFJywgdG9TZW5kKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb21taXQoJ0VESVRfVVNFUl9TVEFURScsIG51bGwpOwogICAgICB9CiAgICB9KTsKICB9LAogIHVwZGF0ZVVzZXI6IGZ1bmN0aW9uIHVwZGF0ZVVzZXIoX3JlZjIsIHVzZXJPYmplY3QpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICBjb25zb2xlLmxvZyh1c2VyT2JqZWN0KTsKICAgIGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKHVzZXJPYmplY3QudWlkKS51cGRhdGUoewogICAgICBkaXNwbGF5TmFtZTogdXNlck9iamVjdC5kaXNwbGF5TmFtZSwKICAgICAgZmlyc3ROYW1lOiB1c2VyT2JqZWN0LmZpcnN0TmFtZSwKICAgICAgbGFzdE5hbWU6IHVzZXJPYmplY3QubGFzdE5hbWUsCiAgICAgIHRlbE51bWJlcjogdXNlck9iamVjdC50ZWxOdW1iZXIKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgY29uc29sZS5sb2cocik7CiAgICAgIGNvbW1pdCgnRURJVF9VU0VSX1NUQVRFJywgcik7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgdGhyb3cgZXJyb3I7CiAgICB9KTsKICB9LAogIGVkaXRVc2VyU3RhdGU6IGZ1bmN0aW9uIGVkaXRVc2VyU3RhdGUoX3JlZjMsIG9iaikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgIGNvbW1pdCgnRURJVF9VU0VSX1NUQVRFJywgb2JqKTsKICB9Cn07CnZhciBnZXR0ZXJzID0gewogIGlzTG9nZ2VkSW46IGZ1bmN0aW9uIGlzTG9nZ2VkSW4oc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pc0xvZ2dlZEluOwogIH0sCiAgY3VycmVudFVzZXI6IGZ1bmN0aW9uIGN1cnJlbnRVc2VyKHN0YXRlKSB7CiAgICBpZiAoc3RhdGUgJiYgc3RhdGUudXNlcikgewogICAgICByZXR1cm4gewogICAgICAgIGVtYWlsOiBzdGF0ZS51c2VyLmVtYWlsLAogICAgICAgIGVtYWlsVmVyaWZpZWQ6IHN0YXRlLnVzZXIuZW1haWxWZXJpZmllZCwKICAgICAgICB1aWQ6IHN0YXRlLnVzZXIudWlkCiAgICAgIH0gfHwgJyc7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4ge307CiAgICB9CiAgfSwKICB1c2VyOiBmdW5jdGlvbiB1c2VyKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudXNlcjsKICB9LAogIGlzVXNlckxvYWRpbmc6IGZ1bmN0aW9uIGlzVXNlckxvYWRpbmcoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS51c2VyTG9hZGluZzsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzCn07"},{"version":3,"sources":["/Users/sthembisomashiyane/WebstormProjects/dripy/src/stores/modules/auth.js"],"names":["db","firebaseAuth","state","isLoggedIn","currentUser","user","userLoading","mutations","actions","getUser","uid","commit","collection","doc","onSnapshot","exists","toSend","data","console","log","updateUser","userObject","update","displayName","firstName","lastName","telNumber","then","r","catch","error","editUserState","obj","getters","email","emailVerified","isUserLoading"],"mappings":"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","sourcesContent":["import {db, firebaseAuth} from '../../config/firebaseConfig';\n\nconst state = {\n    isLoggedIn: firebaseAuth.currentUser != null,\n    user: firebaseAuth.currentUser,\n    userLoading: false\n}\n\nconst mutations = {\n    'AUTH_STATUS_CHANGE'(state) {\n        state.isLoggedIn = firebaseAuth.currentUser != null;\n        state.user = firebaseAuth.currentUser;\n    },\n    'EDIT_USER_STATE'(state, user) {\n        state.user = user;\n        state.userLoading = false;\n    }\n}\n\nconst actions = {\n    getUser({commit}, uid) {\n        state.userLoading = true\n        return db.collection(\"users\").doc(uid).onSnapshot(user => {\n            if (user.exists) {\n                const toSend = user.data();\n                console.log(toSend);\n                commit('EDIT_USER_STATE', toSend);\n            }\n            else {\n                commit('EDIT_USER_STATE', null);\n            }\n        })\n    },\n    updateUser({commit}, userObject) {\n        console.log(userObject);\n        db.collection('users').doc(userObject.uid).update({\n            displayName: userObject.displayName,\n            firstName: userObject.firstName,\n            lastName: userObject.lastName,\n            telNumber: userObject.telNumber,\n        }).then(r => {\n            console.log(r);\n            commit('EDIT_USER_STATE', r);\n        }).catch(error => {\n            throw error\n        })\n    },\n    editUserState({commit}, obj) {\n        commit('EDIT_USER_STATE', obj);\n    }\n}\n\nconst getters = {\n    isLoggedIn: (state) => {\n        return state.isLoggedIn;\n    },\n    currentUser: (state) => {\n        if (state && state.user) {\n            return {\n                email: state.user.email,\n                emailVerified: state.user.emailVerified,\n                uid: state.user.uid,\n            } || ''\n        } else {\n            return {};\n        }\n    },\n    user: (state) => {\n        return state.user;\n    },\n    isUserLoading: (state) => {\n        return state.userLoading;\n    }\n}\n\nexport default {\n    state,\n    mutations,\n    actions,\n    getters\n}\n"]}]}