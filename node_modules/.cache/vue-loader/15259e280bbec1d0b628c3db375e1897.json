{"remainingRequest":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sthembisomashiyane/WebstormProjects/dripy/src/components/brand/BrandProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/src/components/brand/BrandProfile.vue","mtime":1587899242304},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/cache-loader/dist/cjs.js","mtime":1587899238127},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/babel-loader/lib/index.js","mtime":1587899237742},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/cache-loader/dist/cjs.js","mtime":1587899238127},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/vue-loader/lib/index.js","mtime":1587899242029}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWF4TGVuZ3RoLCBtaW5MZW5ndGgsIHJlcXVpcmVkfSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOwppbXBvcnQgKiBhcyBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CmltcG9ydCB7bWFwQWN0aW9ucywgbWFwR2V0dGVyc30gZnJvbSAidnVleCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiQnJhbmRQcm9maWxlIiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYnJhbmQ6IHsKICAgICAgICAgICAgICAgIGJyYW5kSUQ6ICcnLAogICAgICAgICAgICAgICAgYnJhbmROYW1lOiAnJywKICAgICAgICAgICAgICAgIGJyYW5kTG9nbzogJycsCiAgICAgICAgICAgICAgICBicmFuZFRlbE51bWJlcjogJycsCiAgICAgICAgICAgICAgICBicmFuZEVtYWlsOiAnJywKICAgICAgICAgICAgICAgIGJyYW5kRGVzY3JpcHRpb246ICcnLAogICAgICAgICAgICAgICAgZG9jSUQ6ICcnLAogICAgICAgICAgICAgICAgbG9nb1VSTDogJycsCiAgICAgICAgICAgICAgICBvd25lcklEOiAnJywKICAgICAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICB1cmw6ICcnLAogICAgICAgICAgICB1cGxvYWRWYWx1ZTogJycsCiAgICAgICAgICAgIGxvZ29VUkw6ICcnLAogICAgICAgICAgICB1cGxvYWRpbmdTdGF0dXM6IGZhbHNlCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwR2V0dGVycyhbJ3VzZXInXSkKICAgIH0sCiAgICB2YWxpZGF0aW9uczogewogICAgICAgIGJyYW5kOiB7CiAgICAgICAgICAgIGJyYW5kTmFtZToge3JlcXVpcmVkfSwKICAgICAgICAgICAgYnJhbmRMb2dvOiB7cmVxdWlyZWR9LAogICAgICAgICAgICBicmFuZFRlbE51bWJlcjoge3JlcXVpcmVkLCBtYXhMZW5ndGg6IG1heExlbmd0aCgxMCksIG1pbkxlbmd0aDogbWluTGVuZ3RoKDEwKX0sCiAgICAgICAgICAgIGJyYW5kRW1haWw6IHtyZXF1aXJlZH0sCiAgICAgICAgICAgIGJyYW5kRGVzY3JpcHRpb246IHtyZXF1aXJlZH0sCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAuLi5tYXBBY3Rpb25zKFsnZ2V0QnJhbmREb2NSZWZlcmVuY2VCZWZvcmVTYXZlJywgJ3NhdmVCcmFuZCcsICdhZGRNZXNzYWdlJ10pLAogICAgICAgIG9uRmlsZUNoYW5nZShlKSB7CiAgICAgICAgICAgIHRoaXMuYnJhbmQuYnJhbmRMb2dvID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgdGhpcy51cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOwogICAgICAgIH0sCiAgICAgICAgc2F2ZUJyYW5kTG9jYWwoKSB7CiAgICAgICAgICAgIHRoaXMudXBsb2FkaW5nU3RhdHVzID0gdHJ1ZQogICAgICAgICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgICAgICAgdGhpcy5icmFuZC5vd25lcklEID0gdGhpcy51c2VyLnVpZAogICAgICAgICAgICB0aGlzLmdldEJyYW5kRG9jUmVmZXJlbmNlQmVmb3JlU2F2ZSgpLnRoZW4ocmVzdWx0cyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUkVGJywgcmVzdWx0cyk7CiAgICAgICAgICAgICAgICB0aGF0LmJyYW5kLmRvY0lEID0gcmVzdWx0cy5pZDsKICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIHJvb3QgcmVmZXJlbmNlCiAgICAgICAgICAgICAgICBjb25zdCB1cGxvYWRUYXNrID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZih0aGF0LmJyYW5kLmRvY0lEICsgJy8nICsgJ2xvZ28vJyArIHRoYXQuYnJhbmQuYnJhbmRMb2dvLm5hbWUpCiAgICAgICAgICAgICAgICAgICAgLnB1dCh0aGF0LmJyYW5kLmJyYW5kTG9nbyk7CgogICAgICAgICAgICAgICAgdXBsb2FkVGFzay5vbignc3RhdGVfY2hhbmdlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgICAgICAgIC8vIE9ic2VydmUgc3RhdGUgY2hhbmdlIGV2ZW50cyBzdWNoIGFzIHByb2dyZXNzLCBwYXVzZSwgYW5kIHJlc3VtZQogICAgICAgICAgICAgICAgICAgIC8vIEdldCB0YXNrIHByb2dyZXNzLCBpbmNsdWRpbmcgdGhlIG51bWJlciBvZiBieXRlcyB1cGxvYWRlZCBhbmQgdGhlIHRvdGFsIG51bWJlciBvZiBieXRlcyB0byBiZSB1cGxvYWRlZAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gKHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzKSAqIDEwMDsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXBsb2FkIGlzICcgKyBwcm9ncmVzcyArICclIGRvbmUnKTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNuYXBzaG90LnN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZmlyZWJhc2Uuc3RvcmFnZS5UYXNrU3RhdGUuUEFVU0VEOiAvLyBvciAncGF1c2VkJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwbG9hZCBpcyBwYXVzZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGZpcmViYXNlLnN0b3JhZ2UuVGFza1N0YXRlLlJVTk5JTkc6IC8vIG9yICdydW5uaW5nJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwbG9hZCBpcyBydW5uaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcgogICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB1bnN1Y2Nlc3NmdWwgdXBsb2FkcwogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBzdWNjZXNzZnVsIHVwbG9hZHMgb24gY29tcGxldGUKICAgICAgICAgICAgICAgICAgICAvLyBGb3IgaW5zdGFuY2UsIGdldCB0aGUgZG93bmxvYWQgVVJMOiBodHRwczovL2ZpcmViYXNlc3RvcmFnZS5nb29nbGVhcGlzLmNvbS8uLi4KICAgICAgICAgICAgICAgICAgICB1cGxvYWRUYXNrLnNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZG93bmxvYWRVUkwgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmlsZSBhdmFpbGFibGUgYXQnLCBkb3dubG9hZFVSTCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCcmFuZCcsIHRoYXQuYnJhbmQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5icmFuZC5sb2dvVVJMID0gZG93bmxvYWRVUkw7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2F2ZUJyYW5kKHRoYXQuYnJhbmQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudXBsb2FkaW5nU3RhdHVzID0gZmFsc2UKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZV9vYmogPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIkJyYW5kIFNhdmVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUNsYXNzOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0Nsb3NlOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZE1lc3NhZ2UobWVzc2FnZV9vYmopOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["BrandProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BrandProfile.vue","sourceRoot":"src/components/brand","sourcesContent":["<template>\n    <div class=\"row\">\n        <div class=\"col-md-6 offset-md-3 col-sm-10 offset-sm-1\">\n            <form id=\"register-form\" role=\"form\">\n                <h3 class=\"text-center\">Brand Details</h3>\n                <div class=\"form-group\">\n                    <label for=\"brandName\">Brand Name</label>\n                    <input type=\"text\" required=\"required\" name=\"brandName\" id=\"brandName\" class=\"form-control mb-3\"\n                           placeholder=\"Brand Name\"\n                           value=\"\"\n                           v-model=\"brand.brandName\">\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandName.required\">Brand Name is required</div>\n                </div>\n                <div class=\"form-group\" :class=\"{ 'form-group--error': $v.brand.brandDescription.$error }\">\n                    <label for=\"brandDescription\">Brand Description </label>\n                    <input type=\"email\" required=\"required\" name=\"brandDescription\" id=\"brandDescription\"\n                           class=\"form-control mb-3\"\n                           placeholder=\"Brand Description\"\n                           value=\"\"\n                           v-model=\"brand.brandDescription\">\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandDescription.required\">Brand Description is\n                        required\n                    </div>\n                </div>\n                <div class=\"form-group\">\n                    <b-form-file\n                            v-model=\"brand.brandLogo\"\n                            :state=\"Boolean(brand.brandLogo)\"\n                            placeholder=\"Choose a file\"\n                            @change=\"onFileChange\"\n                    ></b-form-file>\n                    <div id=\"preview\" class=\"pt-5\">\n                        <img v-if=\"url\" :src=\"url\"/>\n                    </div>\n                </div>\n                <div class=\"form-group\" :class=\"{ 'form-group--error': $v.brand.brandTelNumber.$error }\">\n                    <label for=\"brandTelNumber\">Phone Number</label>\n                    <input type=\"number\" required=\"required\" name=\"brandTelNumber\" id=\"brandTelNumber\"\n                           class=\"form-control mb-3\"\n                           placeholder=\"Telephone Number\"\n                           value=\"\"\n                           v-model=\"brand.brandTelNumber\">\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandTelNumber.required\">Phone Number is required\n                    </div>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"brandEmail\">Email</label>\n                    <input type=\"brandEmail\" required=\"required\" name=\"brandEmail\" id=\"brandEmail\"\n                           class=\"form-control mb-3\"\n                           placeholder=\"Email Address\"\n                           value=\"\"\n                           v-model=\"brand.brandEmail\">\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandEmail.required\">Email Address is required</div>\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandEmail\">Please enter a valid email address.\n                    </div>\n                </div>\n                <div class=\"form-group\">\n                    <button class=\"btn btn-success\" style=\"width: 100%\" @click.prevent=\"saveBrandLocal\"\n                            :disabled=\"uploadingStatus\">\n                        <i v-if=\"uploadingStatus\" class=\"fa fa-spinner fa-spin\"/>\n                        Update\n                    </button>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {maxLength, minLength, required} from \"vuelidate/lib/validators\";\n    import * as firebase from \"firebase\";\n    import {mapActions, mapGetters} from \"vuex\";\n\n    export default {\n        name: \"BrandProfile\",\n        data() {\n            return {\n                brand: {\n                    brandID: '',\n                    brandName: '',\n                    brandLogo: '',\n                    brandTelNumber: '',\n                    brandEmail: '',\n                    brandDescription: '',\n                    docID: '',\n                    logoURL: '',\n                    ownerID: '',\n                    verified: false\n                },\n                url: '',\n                uploadValue: '',\n                logoURL: '',\n                uploadingStatus: false\n            }\n        },\n        computed: {\n            ...mapGetters(['user'])\n        },\n        validations: {\n            brand: {\n                brandName: {required},\n                brandLogo: {required},\n                brandTelNumber: {required, maxLength: maxLength(10), minLength: minLength(10)},\n                brandEmail: {required},\n                brandDescription: {required},\n            }\n        },\n        methods: {\n            ...mapActions(['getBrandDocReferenceBeforeSave', 'saveBrand', 'addMessage']),\n            onFileChange(e) {\n                this.brand.brandLogo = e.target.files[0];\n                const file = e.target.files[0];\n                this.url = URL.createObjectURL(file);\n            },\n            saveBrandLocal() {\n                this.uploadingStatus = true\n                const that = this;\n                this.brand.ownerID = this.user.uid\n                this.getBrandDocReferenceBeforeSave().then(results => {\n                    console.log('REF', results);\n                    that.brand.docID = results.id;\n                    // Create a root reference\n                    const uploadTask = firebase.storage().ref(that.brand.docID + '/' + 'logo/' + that.brand.brandLogo.name)\n                        .put(that.brand.brandLogo);\n\n                    uploadTask.on('state_changed', function (snapshot) {\n                        // Observe state change events such as progress, pause, and resume\n                        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n                        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                        console.log('Upload is ' + progress + '% done');\n                        switch (snapshot.state) {\n                            case firebase.storage.TaskState.PAUSED: // or 'paused'\n                                console.log('Upload is paused');\n                                break;\n                            case firebase.storage.TaskState.RUNNING: // or 'running'\n                                console.log('Upload is running');\n                                break;\n                        }\n                    }, function (error) {\n                        throw error\n                        // Handle unsuccessful uploads\n                    }, function () {\n                        // Handle successful uploads on complete\n                        // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n                        uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n                            console.log('File available at', downloadURL);\n                            console.log('Brand', that.brand);\n\n                            that.brand.logoURL = downloadURL;\n                            that.saveBrand(that.brand).then(res => {\n                                console.log(res)\n                                that.uploadingStatus = false\n\n                                let message_obj = {\n                                    message: \"Brand Saved Successfully\",\n                                    messageClass: \"success\",\n                                    autoClose: true\n                                }\n                                that.addMessage(message_obj);\n                            })\n                        })\n                    });\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    #preview {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n\n    #preview img {\n        max-width: 100%;\n        max-height: 500px;\n    }\n</style>\n"]}]}