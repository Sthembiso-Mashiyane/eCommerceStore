{"remainingRequest":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sthembisomashiyane/WebstormProjects/dripy/src/components/brand/BrandProfile.vue?vue&type=style&index=0&id=c386224c&scoped=true&lang=css&","dependencies":[{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/src/components/brand/BrandProfile.vue","mtime":1587899242304},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/css-loader/dist/cjs.js","mtime":1587899238620},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1587899242029},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/postcss-loader/src/index.js","mtime":1587899240839},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/cache-loader/dist/cjs.js","mtime":1587899238127},{"path":"/Users/sthembisomashiyane/WebstormProjects/dripy/node_modules/vue-loader/lib/index.js","mtime":1587899242029}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNwcmV2aWV3IHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KCiNwcmV2aWV3IGltZyB7CiAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICBtYXgtaGVpZ2h0OiA1MDBweDsKfQo="},{"version":3,"sources":["BrandProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"BrandProfile.vue","sourceRoot":"src/components/brand","sourcesContent":["<template>\n    <div class=\"row\">\n        <div class=\"col-md-6 offset-md-3 col-sm-10 offset-sm-1\">\n            <form id=\"register-form\" role=\"form\">\n                <h3 class=\"text-center\">Brand Details</h3>\n                <div class=\"form-group\">\n                    <label for=\"brandName\">Brand Name</label>\n                    <input type=\"text\" required=\"required\" name=\"brandName\" id=\"brandName\" class=\"form-control mb-3\"\n                           placeholder=\"Brand Name\"\n                           value=\"\"\n                           v-model=\"brand.brandName\">\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandName.required\">Brand Name is required</div>\n                </div>\n                <div class=\"form-group\" :class=\"{ 'form-group--error': $v.brand.brandDescription.$error }\">\n                    <label for=\"brandDescription\">Brand Description </label>\n                    <input type=\"email\" required=\"required\" name=\"brandDescription\" id=\"brandDescription\"\n                           class=\"form-control mb-3\"\n                           placeholder=\"Brand Description\"\n                           value=\"\"\n                           v-model=\"brand.brandDescription\">\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandDescription.required\">Brand Description is\n                        required\n                    </div>\n                </div>\n                <div class=\"form-group\">\n                    <b-form-file\n                            v-model=\"brand.brandLogo\"\n                            :state=\"Boolean(brand.brandLogo)\"\n                            placeholder=\"Choose a file\"\n                            @change=\"onFileChange\"\n                    ></b-form-file>\n                    <div id=\"preview\" class=\"pt-5\">\n                        <img v-if=\"url\" :src=\"url\"/>\n                    </div>\n                </div>\n                <div class=\"form-group\" :class=\"{ 'form-group--error': $v.brand.brandTelNumber.$error }\">\n                    <label for=\"brandTelNumber\">Phone Number</label>\n                    <input type=\"number\" required=\"required\" name=\"brandTelNumber\" id=\"brandTelNumber\"\n                           class=\"form-control mb-3\"\n                           placeholder=\"Telephone Number\"\n                           value=\"\"\n                           v-model=\"brand.brandTelNumber\">\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandTelNumber.required\">Phone Number is required\n                    </div>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"brandEmail\">Email</label>\n                    <input type=\"brandEmail\" required=\"required\" name=\"brandEmail\" id=\"brandEmail\"\n                           class=\"form-control mb-3\"\n                           placeholder=\"Email Address\"\n                           value=\"\"\n                           v-model=\"brand.brandEmail\">\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandEmail.required\">Email Address is required</div>\n                    <div class=\"error text-danger\" v-if=\"!$v.brand.brandEmail\">Please enter a valid email address.\n                    </div>\n                </div>\n                <div class=\"form-group\">\n                    <button class=\"btn btn-success\" style=\"width: 100%\" @click.prevent=\"saveBrandLocal\"\n                            :disabled=\"uploadingStatus\">\n                        <i v-if=\"uploadingStatus\" class=\"fa fa-spinner fa-spin\"/>\n                        Update\n                    </button>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {maxLength, minLength, required} from \"vuelidate/lib/validators\";\n    import * as firebase from \"firebase\";\n    import {mapActions, mapGetters} from \"vuex\";\n\n    export default {\n        name: \"BrandProfile\",\n        data() {\n            return {\n                brand: {\n                    brandID: '',\n                    brandName: '',\n                    brandLogo: '',\n                    brandTelNumber: '',\n                    brandEmail: '',\n                    brandDescription: '',\n                    docID: '',\n                    logoURL: '',\n                    ownerID: '',\n                    verified: false\n                },\n                url: '',\n                uploadValue: '',\n                logoURL: '',\n                uploadingStatus: false\n            }\n        },\n        computed: {\n            ...mapGetters(['user'])\n        },\n        validations: {\n            brand: {\n                brandName: {required},\n                brandLogo: {required},\n                brandTelNumber: {required, maxLength: maxLength(10), minLength: minLength(10)},\n                brandEmail: {required},\n                brandDescription: {required},\n            }\n        },\n        methods: {\n            ...mapActions(['getBrandDocReferenceBeforeSave', 'saveBrand', 'addMessage']),\n            onFileChange(e) {\n                this.brand.brandLogo = e.target.files[0];\n                const file = e.target.files[0];\n                this.url = URL.createObjectURL(file);\n            },\n            saveBrandLocal() {\n                this.uploadingStatus = true\n                const that = this;\n                this.brand.ownerID = this.user.uid\n                this.getBrandDocReferenceBeforeSave().then(results => {\n                    console.log('REF', results);\n                    that.brand.docID = results.id;\n                    // Create a root reference\n                    const uploadTask = firebase.storage().ref(that.brand.docID + '/' + 'logo/' + that.brand.brandLogo.name)\n                        .put(that.brand.brandLogo);\n\n                    uploadTask.on('state_changed', function (snapshot) {\n                        // Observe state change events such as progress, pause, and resume\n                        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n                        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                        console.log('Upload is ' + progress + '% done');\n                        switch (snapshot.state) {\n                            case firebase.storage.TaskState.PAUSED: // or 'paused'\n                                console.log('Upload is paused');\n                                break;\n                            case firebase.storage.TaskState.RUNNING: // or 'running'\n                                console.log('Upload is running');\n                                break;\n                        }\n                    }, function (error) {\n                        throw error\n                        // Handle unsuccessful uploads\n                    }, function () {\n                        // Handle successful uploads on complete\n                        // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n                        uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n                            console.log('File available at', downloadURL);\n                            console.log('Brand', that.brand);\n\n                            that.brand.logoURL = downloadURL;\n                            that.saveBrand(that.brand).then(res => {\n                                console.log(res)\n                                that.uploadingStatus = false\n\n                                let message_obj = {\n                                    message: \"Brand Saved Successfully\",\n                                    messageClass: \"success\",\n                                    autoClose: true\n                                }\n                                that.addMessage(message_obj);\n                            })\n                        })\n                    });\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    #preview {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n\n    #preview img {\n        max-width: 100%;\n        max-height: 500px;\n    }\n</style>\n"]}]}